---
title: Self-host LangSmith with deployment
sidebarTitle: With deployment
icon: "server"
---

Self-hosting LangSmith with graph deployment adds the full [LangSmith Deployment](/langsmith/deployments) capabilities to your self-hosted LangSmith instance. In addition to tracing and evaluating your applications, this setup allows you to deploy, scale, and manage agents and applications directly from your LangSmith control plane.

This guide builds on top of the [Kubernetes installation guide](/langsmith/kubernetes). If you have not already deployed a self-hosted LangSmith instance, follow that guide first before continuing. This page covers the additional setup steps required to enable deployment functionality, such as installing the LangGraph operator, configuring your ingress, and connecting to the LangSmith control plane.

<Info>**Important**<br></br> Self-hosting LangSmith with deployment requires an [Enterprise](/langsmith/plans) plan. </Info>

To understand how self-hosting LangSmith with deployments fits within the overall platform architecture, review the [self-hosting overview](/langsmith/hosting).

## Prerequisites

1. You are using Kubernetes.
2. You have an instance of [self-hosted LangSmith](/langsmith/kubernetes) running.
3. Use the [LangGraph CLI](/langsmith/cli) to [test your application locally](/langsmith/local-server).
4. Use the [LangGraph CLI](/langsmith/cli) to build a Docker image (i.e. `langgraph build`) and push it to a registry your Kubernetes cluster has access to.
5. `KEDA` is installed on your cluster.
```bash
  helm repo add kedacore https://kedacore.github.io/charts
  helm install keda kedacore/keda --namespace keda --create-namespace
```
6. Ingress Configuration
    1. You must set up an ingress for your LangSmith instance. All agents will be deployed as Kubernetes services behind this ingress. Use this guide to [set up an ingress](/langsmith/self-host-ingress) for your instance.
7. You have slack space in your cluster for multiple deployments. `Cluster-Autoscaler` is recommended to automatically provision new nodes.
8. A valid Dynamic PV provisioner or PVs available on your cluster. You can verify this by running:
```bash
  kubectl get storageclass
```
9. Egress to `https://beacon.langchain.com` from your network. This is required for license verification and usage reporting if not running in air-gapped mode. See the [Egress documentation](/langsmith/egress-metrics-metadata) for more details.

## Setup

1. As part of configuring your self-hosted LangSmith instance, you enable the `langgraphPlatform` option. This will provision a few key resources.
    1. `listener`: This is a service that listens to the [control plane](/langsmith/control-plane) for changes to your deployments and creates/updates downstream CRDs.
    2. `LangGraphPlatform CRD`: A CRD for LangSmith Deployment. This contains the spec for managing an instance of a LangSmith deployment.
    3. `operator`: This operator handles changes to your LangSmith CRDs.
    4. `host-backend`: This is the [control plane](/langsmith/control-plane).
2. Two additional images will be used by the chart. Use the images that are specified in the latest release.
```bash
  hostBackendImage:
    repository: "docker.io/langchain/hosted-langserve-backend"
    pullPolicy: IfNotPresent
  operatorImage:
    repository: "docker.io/langchain/langgraph-operator"
    pullPolicy: IfNotPresent
```
3. In your config file for langsmith (usually `langsmith_config.yaml`), enable the `langgraphPlatform` option. Note that you must also have a valid ingress setup:
```bash
  config:
    langgraphPlatform:
      enabled: true
      langgraphPlatformLicenseKey: "YOUR_LANGGRAPH_PLATFORM_LICENSE_KEY"
```
4. In your `values.yaml` file, configure the `hostBackendImage` and `operatorImage` options (if you need to mirror images)
5. You can also configure base templates for your agents by overriding the base templates [here](https://github.com/langchain-ai/helm/blob/main/charts/langsmith/values.yaml#L898).
6. You create a deployment from the [control plane UI](/langsmith/control-plane#control-plane-ui).

---

<Callout icon="pen-to-square" iconType="regular">
  [Edit the source of this page on GitHub](https://github.com/langchain-ai/docs/edit/main/src/langsmith/deploy-self-hosted-full-platform.mdx)
</Callout>
