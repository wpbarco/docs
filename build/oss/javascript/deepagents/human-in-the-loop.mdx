---
title: Human-in-the-loop
description: Learn how to configure human approval for sensitive tool operations
---

Some tool operations may be sensitive and require human approval before execution. Deep agents support human-in-the-loop workflows through LangGraph's interrupt capabilities. You can configure which tools require approval using the `interrupt_on` parameter.

## Basic configuration

The `interrupt_on` parameter accepts a dictionary mapping tool names to interrupt configurations. Each tool can be configured with:

- **`True`**: Enable interrupts with default behavior (approve, edit, reject allowed)
- **`False`**: Disable interrupts for this tool
- **`{"allowed_decisions": [...]}`**: Custom configuration with specific allowed decisions



```typescript
// TODO: Add JS implementation
```


## Decision types

The `allowed_decisions` list controls what actions a human can take when reviewing a tool call:

- **`"approve"`**: Execute the tool with the original arguments as proposed by the agent
- **`"edit"`**: Modify the tool arguments before execution
- **`"reject"`**: Skip executing this tool call entirely

You can customize which decisions are available for each tool:



```typescript
// TODO: Add JS implementation
```


## Handle interrupts

When an interrupt is triggered, the agent pauses execution and returns control. Check for interrupts in the result and handle them accordingly.



```typescript
// TODO: Add JS implementation
```


## Multiple tool calls

When the agent calls multiple tools that require approval, all interrupts are batched together in a single interrupt. You must provide decisions for each one in order.



```typescript
// TODO: Add JS implementation
```


## Edit tool arguments

When `"edit"` is in the allowed decisions, you can modify the tool arguments before execution:



```typescript
// TODO: Add JS implementation
```


## Subagent interrupts

Each subagent can have its own `interrupt_on` configuration that overrides the main agent's settings:



```typescript
// TODO: Add JS implementation
```


When a subagent triggers an interrupt, the handling is the same - check for `__interrupt__` and resume with `Command`.

## Best practices

### Always use a checkpointer

Human-in-the-loop requires a checkpointer to persist agent state between the interrupt and resume:



### Use the same thread ID

When resuming, you must use the same config with the same `thread_id`:



### Match decision order to actions

The decisions list must match the order of `action_requests`:



### Tailor configurations by risk

Configure different tools based on their risk level:

---

<Callout icon="pen-to-square" iconType="regular">
    [Edit the source of this page on GitHub.](https://github.com/langchain-ai/docs/edit/main/src/oss/deepagents/human-in-the-loop.mdx)
</Callout>
<Tip icon="terminal" iconType="regular">
    [Connect these docs programmatically](/use-these-docs) to Claude, VSCode, and more via MCP for    real-time answers.
</Tip>
